<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÔN TẬP CÔNG NGHỆ 9 - CHƯƠNG I</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }

        body {
            background-color: #f1f5f9;
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
        }

        /* Password Screen */
        .password-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 40px);
            padding: 20px;
        }

        .logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo i {
            font-size: 3.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .logo h1 {
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .logo p {
            color: var(--gray);
            font-size: 1rem;
        }

        .password-box {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: var(--shadow);
        }

        .password-input {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .password-input input {
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .password-input input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .btn {
            padding: 16px;
            border-radius: 10px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .error-message {
            color: var(--danger);
            font-size: 0.9rem;
            text-align: center;
            min-height: 20px;
            margin-top: 10px;
        }

        /* Main Content */
        .main-content {
            display: none;
        }

        /* Header */
        .header {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            position: relative;
        }

        .header h1 {
            font-size: 1.5rem;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .header p {
            color: var(--gray);
            font-size: 0.95rem;
        }

        .timer {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .timer.warning {
            background-color: var(--warning);
        }

        .timer.danger {
            background-color: var(--danger);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Exam Content */
        .question-card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .question-number {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .question-text {
            font-size: 1.05rem;
            line-height: 1.5;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .option:hover {
            border-color: var(--primary);
            background-color: rgba(37, 99, 235, 0.05);
        }

        .option.selected {
            border-color: var(--primary);
            background-color: rgba(37, 99, 235, 0.1);
        }

        .option-letter {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background-color: var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }

        .option.selected .option-letter {
            background-color: var(--primary);
            color: white;
        }

        /* Control Panel */
        .control-panel {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            position: sticky;
            bottom: 0;
            z-index: 10;
        }

        .progress-info {
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--border);
            border-radius: 4px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px;
        }

        .btn-success {
            background-color: var(--secondary);
            color: white;
        }

        .btn-success:hover {
            background-color: #0d9666;
            transform: translateY(-2px);
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
        }

        /* Review Screen */
        .review-screen {
            display: none;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .score-container {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .score-title {
            font-size: 1.2rem;
            color: var(--gray);
            margin-bottom: 10px;
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .review-question-card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--border);
        }

        .review-question-card.correct {
            border-left-color: var(--secondary);
        }

        .review-question-card.incorrect {
            border-left-color: var(--danger);
        }

        .answer-status {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .user-answer, .correct-answer {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .user-answer span:first-child {
            color: var(--warning);
            font-weight: 600;
        }

        .correct-answer span:first-child {
            color: var(--secondary);
            font-weight: 600;
        }

        .review-option {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border: 2px solid transparent;
        }

        .review-option.user-selected {
            background-color: rgba(245, 158, 11, 0.1);
            border-color: rgba(245, 158, 11, 0.3);
        }

        .review-option.correct-answer {
            background-color: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 20px;
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .timer {
                position: static;
                display: inline-block;
                margin-top: 15px;
                transform: none;
            }
            
            .header {
                text-align: center;
                padding: 15px;
            }
            
            .control-buttons {
                flex-direction: column;
            }
            
            .control-btn {
                min-width: 100%;
            }
            
            .question-card {
                padding: 15px;
            }
            
            .option {
                padding: 12px;
            }
            
            .password-box {
                padding: 20px;
            }
            
            .logo i {
                font-size: 2.5rem;
            }
            
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .score-value {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .question-text {
                font-size: 1rem;
            }
            
            .option-text {
                font-size: 0.95rem;
            }
            
            .btn {
                padding: 14px;
            }
            
            .review-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .answer-status {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* Prevent text selection */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body>
    <!-- Password Screen -->
    <div class="password-screen" id="passwordScreen">
        <div class="logo">
            <i class="fas fa-book-open"></i>
            <h1>HỆ THỐNG ÔN TẬP</h1>
            <p>CÔNG NGHỆ 9 - HỌC KỲ II - 2025-2026</p>
        </div>
        
        <div class="password-box">
            <div class="password-input">
                <input type="password" id="passwordInput" placeholder="Nhập mật khẩu để truy cập">
                <button class="btn btn-primary" id="submitPassword">
                    <i class="fas fa-unlock-alt"></i> MỞ KHÓA
                </button>
                <div class="error-message" id="passwordError"></div>
            </div>
        </div>
        
        <div class="footer">
            <p>Trường THCS Xuân Thới Thượng</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container main-content" id="mainContent">
        <!-- Header -->
        <div class="header">
            <h1>ÔN TẬP CHƯƠNG I – CÔNG NGHỆ 9</h1>
            <p>HKII – NĂM HỌC 2025–2026 • Trường THCS Xuân Thới Thượng</p>
            <div class="timer" id="timer">20:00</div>
        </div>

        <!-- Exam Content -->
        <div class="exam-content" id="examScreen">
            <div id="questionsContainer">
                <!-- Questions will be loaded here -->
            </div>

            <div class="control-panel">
                <div class="progress-info">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text">
                        <span>Tiến độ: <span id="answeredCount">0</span>/40</span>
                        <span id="progressPercent">0%</span>
                    </div>
                </div>
                
                <div class="control-buttons">
                    <button class="btn btn-primary control-btn" id="submitExam">
                        <i class="fas fa-paper-plane"></i> NỘP BÀI
                    </button>
                    <button class="btn btn-success control-btn" id="reviewExam" disabled>
                        <i class="fas fa-chart-bar"></i> XEM KẾT QUẢ
                    </button>
                    <button class="btn btn-danger control-btn" id="resetExam">
                        <i class="fas fa-redo"></i> LÀM LẠI
                    </button>
                </div>
            </div>
        </div>

        <!-- Review Screen -->
        <div class="review-screen" id="reviewScreen">
            <div class="review-header">
                <h1>KẾT QUẢ BÀI LÀM</h1>
                <button class="btn btn-primary" id="backToExam">
                    <i class="fas fa-arrow-left"></i> QUAY LẠI
                </button>
            </div>
            
            <div class="score-container">
                <div class="score-title">ĐIỂM SỐ</div>
                <div class="score-value" id="scoreValue">0/40</div>
                <div id="scorePercentage" style="color: var(--gray); margin-top: 5px;">0%</div>
            </div>
            
            <div id="reviewQuestionsContainer">
                <!-- Review questions will be loaded here -->
            </div>
            
            <div style="margin-top: 20px;">
                <button class="btn btn-danger" id="resetFromReview" style="width: 100%;">
                    <i class="fas fa-redo"></i> LÀM LẠI BÀI THI
                </button>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Hệ thống ôn tập trực tuyến • © 2025-2026</p>
        </div>
    </div>

    <script>
        // Correct answers
        const correctAnswers = {
            1: 'A', 2: 'D', 3: 'A', 4: 'B', 5: 'B', 6: 'A', 7: 'B', 8: 'D', 9: 'A', 10: 'A',
            11: 'D', 12: 'C', 13: 'A', 14: 'C', 15: 'D', 16: 'D', 17: 'C', 18: 'C', 19: 'C', 20: 'A',
            21: 'A', 22: 'D', 23: 'D', 24: 'B', 25: 'C', 26: 'C', 27: 'C', 28: 'A', 29: 'D', 30: 'C',
            31: 'D', 32: 'D', 33: 'C', 34: 'A', 35: 'C', 36: 'A', 37: 'A', 38: 'B', 39: 'A', 40: 'A'
        };

        // Questions data
        const questions = [
            "Vitamin A thường có trong loại thực phẩm nào?",
            "Vai trò của vitamin A đối với cơ thể con người là:",
            "Chất sát khuẩn sinh học phytoncid có ở thực phẩm nào?",
            "Thiếu Iodine có thể dẫn tới:",
            "Các cách làm khô bằng năng lượng tự nhiên là:",
            "Lưu ý khi bảo quản thực phẩm tươi sống là:",
            "Phương pháp bảo quản TP nào làm biến đổi về cảm quan và thành phần cấu tạo?",
            "Nếu cơ thể thiếu vitamin B sẽ dẫn đến hệ quả gì?",
            "Nội dung nào dưới đây không phải là ưu điểm của phương pháp sử dụng các chất sát khuẩn?",
            "Chất khoáng thường được phân chia thành mấy nhóm?",
            "Vitamin C có vai trò gì đối với cơ thể con người?",
            "Chất khoáng kẽm có vai trò gì đối với cơ thể người?",
            "Mục đích của phương pháp sóng siêu âm là:",
            "Một trong những vai trò chính của chất xơ đối với cơ thể người là:",
            "Phụ nữ có thai cho con bú cần tăng cường bổ sung chất khoáng nào sau đây?",
            "Cách chọn thực phẩm bơ tươi ngon là:",
            "Khi bảo quản thực phẩm thịt, cá cần có những lưu ý nào?",
            "Chất dinh dưỡng nào chiếm tỉ lệ cung cấp năng lượng cao nhất cho cơ thể con người?",
            "Thừa vitamin C có thể dẫn tới:",
            "Vitamin C có nhiều nhất trong loại thực phẩm nào sau đây?",
            "Vitamin C thường có trong loại thực phẩm nào?",
            "Thực phẩm được trộn với muối để hạn chế vi sinh vật phát triển và kéo dài thời gian sử dụng. Đây là phương pháp bảo quản nào sau đây?",
            "Các tác nhân vật lí trong phương pháp bảo quản thực phẩm là:",
            "Các phụ gia thực phẩm có tính sát khuẩn là:",
            "Điều nào không đúng khi nói về bảo quản chất dinh dưỡng trong rau, củ, quả tươi?",
            "Nội dung nào sau đây không phải là ưu điểm của PP chiếu tia tử ngoại (UV)?",
            "Nếu cơ thể thiếu chất khoáng calcium sẽ dẫn đến hệ quả gì?",
            "Thiếu vitamin D có thể gây ra hệ quả gì?",
            "Chất khoáng sắt thường có trong các loại thực phẩm nào?",
            "Nhược điểm của phương pháp điều chỉnh độ pH của thực phẩm là:",
            "Thực phẩm giàu Iodine thường có trong thực phẩm nào?",
            "Cách bảo quản đậu, hạt khô, gạo là:",
            "Vitamin A có nhiều nhất trong loại thực phẩm nào sau đây?",
            "Vitamin C có nhiều nhất trong loại thực phẩm nào sau đây?",
            "Mục đích của phương pháp phóng xạ ion là:",
            "Thừa vitamin A có thể dẫn tới:",
            "Cá được xếp vào hộp kín, sau đó gia nhiệt để tiêu diệt vi sinh vật gây hư hỏng thực phẩm. Đây là phương pháp bảo quản nào sau đây?",
            "Mục đích của phương pháp chiếu tia tử ngoại (UV) là:",
            "Vitamin được chia làm mấy nhóm?",
            "Ý nào dưới đây không đúng khi nói về nước?"
        ];

        const options = [
            ["Sữa, gan, lòng đỏ trứng, bơ, phô mai.", "Các loại ngũ cốc, rau, củ, quả, hạt đậu.", "Các loại chanh, cam, bưởi, dưa hấu, ổi,…", "Hải sản."],
            ["Tham gia quá trình oxy hóa, kích thích quá trình liền sẹo diễn ra nhanh và dự phòng bệnh tim mạch.", "Kích thích ăn uống, góp phần vào sự phát triển của hệ thần kinh.", "Tăng cường quá trình cốt hóa xương.", "Phát triển, tái tạo các tế bào da, niêm mạc và tăng cường miễn dịch."],
            ["Củ hành, củ tỏi.", "Trứng chim, trứng cá.", "Củ hành, trứng cá.", "Củ tỏi, trong nước mát, các mô."],
            ["Buồn nôn, đau bụng, tiêu chảy, đắng miệng.", "Suy giáp – bệnh bướu cổ.", "Da đậm màu, máu đông, đau khớp, đau bụng.", "Khát nước, chướng bụng, tăng huyết áp."],
            ["Năng lượng gió, nước,…", "Năng lượng mặt trời, gió,…", "Năng lượng mặt trời, nước,…", "Năng lượng điện, gió,…"],
            ["Có thể bảo quản lạnh trong thời gian ngắn và đông lạnh khi chưa cần sử dụng ngay.", "Bảo quản lạnh sau khi giết mổ.", "Đun nấu thịt, cá sau khi cắt, thái.", "Nên để thịt, cá trong túi giấy sau khi cắt, thái."],
            ["Phương pháp đóng hộp.", "Phương pháp phóng xạ ion.", "Phương pháp ngâm đường.", "Phương pháp bảo quản lạnh."],
            ["Còi xương ở trẻ em và loãng xương ở người trưởng thành.", "Quáng gà, giảm khả năng miễn dịch.", "Quá trình lão hóa diễn ra nhanh chóng, nguy cơ mắc một số bệnh lí tim mạch.", "Chán ăn, các triệu chứng về thần kinh."],
            ["Gia tăng sự phát triển của vi sinh vật gây hỏng thực phẩm.", "Kéo dài thời gian sử dụng của thực phẩm.", "Giúp tiêu diệt sự phát triển của vi sinh vật gây hỏng thực phẩm.", "Giúp ngăn ngừa sự phát triển của vi sinh vật gây hỏng thực phẩm."],
            ["2.", "3.", "4.", "5."],
            ["Giúp phát triển, tái tạo các tế bào da, niêm mạc và tăng cường cơ thể.", "Kích thích sự phát triển của hệ xương.", "Góp phần vào sự phát triển của hệ thần kinh", "Kích thích quá trình liền sẹo diễn ra nhanh."],
            ["Giúp điều hòa đường huyết, hỗ trợ hoạt động của cơ bắp, bộ não tim mạch.", "Làm cho xương và răng chắc khỏe.", "Tăng cường hệ miễn dịch, phát triển hệ thống thần kinh trung ương.", "Là thành phần của enzyme hoặc xúc tác cho phản ứng sinh hóa trong cơ thể."],
            ["Phá hủy sinh vật.", "Để chống mốc, vi khuẩn trong không khí, trên dụng cụ, bề mặt thực phẩm.", "Làm rối loạn các tính chất sinh vật của tế bào vi khuẩn.", "Làm mất khả năng sinh sản của vi sinh vật."],
            ["Là môi trường cho các phản ứng chuyển hóa xảy ra trong cơ thể.", "Chuyển hóa và trao đổi chất trong tế bào và giữa tế bào với môi trường.", "Hấp thụ những chất có hại trong đường tiêu hóa.", "Tham gia cấu tạo tế bào và các mô của cơ thể."],
            ["Kẽm.", "Natri.", "Iodine.", "Sắt."],
            ["Bơ màu vàng đậm, vị ngậy, chảy nước, không có mùi lạ, bề mặt mịn màng.", "Bơ màu vàng tươi, vị ngậy, không chảy nước, không có mùi lạ, bề mặt sần sùi.", "Bơ màu vàng đậm, vị ngậy, không chảy nước, bề mặt mịn màng, có mùi thơm đặc trưng.", "Bơ màu vàng tươi, vị ngậy, không chảy nước, không có mùi lạ, bề mặt mịn màng, có mùi thơm đặc trưng."],
            ["Bảo quản thịt, cá ở nơi khô, ráo.", "Không ngâm rửa thịt, cá sau khi cắt, thái.", "Bảo quản thịt, cá ở nhiệt độ thấp (trong tủ lạnh hoặc ngăn đông).", "Nên để thịt, cá trong túi giấy sau khi cắt, thái."],
            ["Protein.", "Lipid.", "Carbohydrate.", "Vitamin."],
            ["Xanh xao, tăng tiết mồ hôi, khó thở, cứng cơ, phù, thở không đều, giảm vận động hoặc hoạt động, sưng mí mắt hoặc đỏ da.", "Nhức đầu, ngứa ngáy, phát ban, gây tê liệt hay yếu chân tay, co mặt.", "Rối loạn tiêu hóa, loét dạ dày, tá tràng, đau đầu, mất ngủ, viêm bàng quang, tiêu chảy, tăng tạo sỏi thận, gây bệnh gout.", "Gây hiện tượng hoảng hốt, đau đầu, mệt mỏi, tê thần kinh cơ bắp, tim đập nhanh, chuột rút, phù nề."],
            ["Quả ổi.", "Rau cải.", "Cá."],
            ["Các loại rau và quả: chanh, cam, bưởi, dưa hấu, bắp cải, cà chua.", "Các loại ngũ cốc, rau, củ, quả, hạt đậu.", "Rau có màu xanh đậm hoặc vàng, quả có màu vàng: rau muống, rau ngót, cải xanh, rau dền, bí đỏ, cà rốt, xoài đặc.", "Sữa, dầu gan cá, lòng đỏ trứng, bơ."],
            ["Phương pháp đóng hộp.", "Phương pháp tiệt trùng.", "Phương pháp làm khô tự nhiên.", "Phương pháp ướp muối."],
            ["Bảo quản lạnh.", "Sấy khô, phơi nắng.", "Đóng hộp, bao gói kín.", "Tia tử ngoại, sóng siêu âm, chiếu xạ."],
            ["Sorbic acid, kali nitrat, propionic acid,…", "Sorbic acid, sodium benzoate, propionic acid.", "Sodium benzoate, propionic acid,…", "Sorbic acid, glucose,…"],
            ["Rửa rau thật sạch, chỉ nên cắt, thái sau khi rửa, không để rau khô héo.", "Rau, củ, quả ăn sống nên gọt vỏ trước khi ăn.", "Nên để trong hộp, lọ kín,…", "Nên sơ chế sạch sẽ và bảo quản lạnh trong thời gian ngắn."],
            ["Không làm ảnh hưởng nhiều đến chất lượng của thực phẩm.", "Được áp dụng rộng rãi trong sản xuất công nghiệp.", "Làm thay đổi thành phần dinh dưỡng và mùi vị ban đầu của thực phẩm.", "Đem lại hiệu quả cao."],
            ["Thiếu máu.", "Tăng huyết áp.", "Còi xương ở trẻ em và loãng xương ở người trưởng thành.", "Dẫn đến bệnh bướu cổ."],
            ["Còi xương ở trẻ em và loãng xương ở người trưởng thành.", "Thiếu máu hồng cầu và bệnh thần kinh ngoại vi.", "Thoái hóa các neuron thần kinh.", "Viêm lợi, phát ban."],
            ["Muối, các loại gia vị.", "Rau lá màu xanh đậm.", "Các loại thịt, hải sản, lòng đỏ trứng, rau cải.", "Gan, thịt động vật bốn chân và trứng."],
            ["Đảm bảo chất lượng sản phẩm.", "Gia tăng sự phát triển của các vi sinh vật gây bệnh.", "Thời gian bảo quản không dài, ảnh hưởng đến hương vị, giá trị dinh dưỡng thực phẩm.", "Thời gian bảo quản dài, làm giảm giá trị dinh dưỡng của thực phẩm."],
            ["Gạo, ngô, cá mực, rau bắp cải.", "Rau bắp cải, cá ngừ, tảo, đậu lầy.", "Súp lơ xanh, cá mực, trứng, cá ngừ.", "Rau bắp cải, cá mực, rong biển, sữa, tôm."],
            ["Bảo quản trong các túi đông lạnh.", "Sơ chế sạch sẽ và bảo quản lạnh.", "Khử khuẩn bằng các tác nhân vật lí.", "Để trong hộp, lọ kín, nơi khô ráo, mát mẻ."],
            ["Quả táo.", "Hải sản.", "Rau dền.", "Hạt đậu."],
            ["Quả ổi.", "Rau cải.", "Cá.", "Gạo."],
            ["Phá hủy sinh vật.", "Để chống mốc, vi khuẩn trong không khí, trên dụng cụ, bề mặt thực phẩm.", "Làm rối loạn các tính chất sinh vật của tế bào vi khuẩn, làm mất khả năng sinh sản của vi sinh vật.", "Tăng thời gian bảo quản thực phẩm."],
            ["Đau đầu, buồn nôn, chán ăn, khô da, niêm mạc, đau xương khớp, tổn thương gan.", "Rối loạn tiêu hóa, loét dạ dày, tá tràng, đau đầu, mất ngủ, viêm bàng quang.", "Làm loãng máu và dẫn đến chảy máu, nguy cơ gây tử vong.", "Đau cơ, đau xương, mạch máu bị vôi hóa."],
            ["Phương pháp đóng hộp.", "Phương pháp tiệt trùng.", "Phương pháp làm khô tự nhiên.", "Phương pháp ướp muối."],
            ["Phá hủy sinh vật.", "Để chống mốc, vi khuẩn trong không khí, trên dụng cụ, bề mặt thực phẩm.", "Làm rối loạn các tính chất sinh vật của tế bào vi khuẩn.", "Làm mất khả năng sinh sản của vi sinh vật."],
            ["2.", "3.", "4.", "5."],
            ["Có thể cung cấp nước cho cơ thể từ việc ăn các loại thực phẩm là thịt đỏ, hải sản.", "Là thành phần quan trọng của cơ thể sinh vật cũng như con người.", "Nước chiếm khoảng 74% trọng lượng cơ thể của trẻ sơ sinh.", "Nước chiếm khoảng 55–60% trọng lượng cơ thể người trưởng thành nam giới."]
        ];

        // Application state
        let userAnswers = {};
        let examSubmitted = false;
        let timerInterval;
        let timeLeft = 20 * 60; // 20 minutes

        // Password system
        const passwordScreen = document.getElementById('passwordScreen');
        const mainContent = document.getElementById('mainContent');
        const passwordInput = document.getElementById('passwordInput');
        const submitPassword = document.getElementById('submitPassword');
        const passwordError = document.getElementById('passwordError');
        const correctPassword = '9a1maidinh';

        submitPassword.addEventListener('click', unlockSystem);
        passwordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') unlockSystem();
        });

        function unlockSystem() {
            const enteredPassword = passwordInput.value.trim();
            
            if (enteredPassword === correctPassword) {
                passwordError.textContent = '';
                passwordScreen.style.display = 'none';
                mainContent.style.display = 'block';
                initializeExam();
                startTimer();
            } else {
                passwordError.textContent = 'Mật khẩu không đúng. Vui lòng thử lại.';
                passwordInput.value = '';
                passwordInput.focus();
            }
        }

        // Initialize exam
        function initializeExam() {
            const questionsContainer = document.getElementById('questionsContainer');
            questionsContainer.innerHTML = '';
            
            userAnswers = {};
            examSubmitted = false;
            
            for (let i = 1; i <= 40; i++) {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.id = `question-${i}`;
                
                questionCard.innerHTML = `
                    <div class="question-number">Câu ${i}:</div>
                    <div class="question-text">${questions[i-1]}</div>
                    <div class="options-container">
                        ${['A', 'B', 'C', 'D'].map((letter, index) => `
                            <div class="option" data-question="${i}" data-option="${letter}">
                                <div class="option-letter">${letter}</div>
                                <div class="option-text">${options[i-1][index]}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                questionsContainer.appendChild(questionCard);
            }
            
            // Add click events to options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    if (examSubmitted) return;
                    
                    const questionNum = parseInt(this.getAttribute('data-question'));
                    const selectedOption = this.getAttribute('data-option');
                    
                    userAnswers[questionNum] = selectedOption;
                    
                    // Update UI
                    const questionCard = document.getElementById(`question-${questionNum}`);
                    questionCard.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    
                    updateProgress();
                });
            });
            
            updateProgress();
            document.getElementById('reviewExam').disabled = true;
        }

        // Progress tracking
        function updateProgress() {
            const answeredCount = Object.keys(userAnswers).length;
            const progressPercent = Math.round((answeredCount / 40) * 100);
            
            document.getElementById('answeredCount').textContent = answeredCount;
            document.getElementById('progressPercent').textContent = `${progressPercent}%`;
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            
            if (answeredCount === 40 && !examSubmitted) {
                document.getElementById('reviewExam').disabled = false;
            }
        }

        // Timer functions
        function startTimer() {
            clearInterval(timerInterval);
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const timerElement = document.getElementById('timer');
            
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            timerElement.classList.remove('warning', 'danger');
            if (timeLeft <= 5 * 60) {
                timerElement.classList.add('warning');
            }
            if (timeLeft <= 2 * 60) {
                timerElement.classList.remove('warning');
                timerElement.classList.add('danger');
            }
        }

        // Submit exam
        document.getElementById('submitExam').addEventListener('click', submitExam);
        
        function submitExam() {
            if (Object.keys(userAnswers).length < 40) {
                if (!confirm(`Bạn mới trả lời ${Object.keys(userAnswers).length}/40 câu. Nộp bài ngay?`)) {
                    return;
                }
            }
            
            examSubmitted = true;
            clearInterval(timerInterval);
            
            let score = 0;
            for (let i = 1; i <= 40; i++) {
                if (userAnswers[i] === correctAnswers[i]) {
                    score++;
                }
            }
            
            showReviewScreen(score);
        }

        // Review screen
        function showReviewScreen(score) {
            document.getElementById('examScreen').style.display = 'none';
            document.getElementById('reviewScreen').style.display = 'block';
            
            const scorePercentage = Math.round((score / 40) * 100);
            document.getElementById('scoreValue').textContent = `${score}/40`;
            document.getElementById('scorePercentage').textContent = `Tỉ lệ đúng: ${scorePercentage}%`;
            
            const reviewContainer = document.getElementById('reviewQuestionsContainer');
            reviewContainer.innerHTML = '';
            
            for (let i = 1; i <= 40; i++) {
                const userAnswer = userAnswers[i] || 'Chưa trả lời';
                const correctAnswer = correctAnswers[i];
                const isCorrect = userAnswer === correctAnswer;
                
                const reviewCard = document.createElement('div');
                reviewCard.className = `review-question-card ${isCorrect ? 'correct' : 'incorrect'}`;
                
                reviewCard.innerHTML = `
                    <div class="question-number">Câu ${i}:</div>
                    <div class="question-text">${questions[i-1]}</div>
                    <div class="answer-status">
                        <div class="user-answer">
                            <span>Bạn chọn:</span>
                            <span>${userAnswer}</span>
                        </div>
                        <div class="correct-answer">
                            <span>Đáp án đúng:</span>
                            <span>${correctAnswer}</span>
                        </div>
                    </div>
                    <div class="options-container">
                        ${['A', 'B', 'C', 'D'].map((letter, index) => {
                            let optionClass = 'review-option option';
                            if (letter === userAnswer) optionClass += ' user-selected';
                            if (letter === correctAnswer) optionClass += ' correct-answer';
                            
                            return `
                                <div class="${optionClass}">
                                    <div class="option-letter">${letter}</div>
                                    <div class="option-text">${options[i-1][index]}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                
                reviewContainer.appendChild(reviewCard);
            }
        }

        // Navigation
        document.getElementById('backToExam').addEventListener('click', () => {
            document.getElementById('reviewScreen').style.display = 'none';
            document.getElementById('examScreen').style.display = 'block';
        });

        document.getElementById('reviewExam').addEventListener('click', () => {
            let score = 0;
            for (let i = 1; i <= 40; i++) {
                if (userAnswers[i] === correctAnswers[i]) {
                    score++;
                }
            }
            showReviewScreen(score);
        });

        // Reset exam
        document.getElementById('resetExam').addEventListener('click', resetExam);
        document.getElementById('resetFromReview').addEventListener('click', resetExam);
        
        function resetExam() {
            if (!confirm('Bạn có chắc chắn muốn làm lại bài thi?')) {
                return;
            }
            
            timeLeft = 20 * 60;
            clearInterval(timerInterval);
            
            document.getElementById('reviewScreen').style.display = 'none';
            document.getElementById('examScreen').style.display = 'block';
            
            initializeExam();
            startTimer();
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            passwordInput.focus();
        });
    </script>
</body>
</html>
